@model AppUser
@using System.Security.Claims

@if (Model != null)
{
	<ul class="nav navbar-nav">
		<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Resources <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li class="dropdown-header text-bold">Employees</li>
				<li><a asp-area="" asp-controller="Employees" asp-action="Index">List</a></li>
				<li class="divider"></li>
				<li class="dropdown-header text-bold">Subcontractors</li>
				<li><a asp-area="" asp-controller="Subcontractors" asp-action="Index">List</a></li>
				<li><a asp-area="" asp-controller="Employees" asp-action="Statistics">Statistics</a></li>
			</ul>
		</li>

		<li><a asp-area="" asp-controller="Clients" asp-action="Index">Clients</a></li>
		<li><a asp-area="" asp-controller="Projects" asp-action="Index">Projects</a></li>
		<li><a asp-area="" asp-controller="Home" asp-action="Contact">Support</a></li>
	</ul>

	<ul class="nav navbar-nav navbar-right">
		<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" style="padding-top: 10px !important; padding-bottom: 10px !important;">
				@if (Model.ProfilePicture == null)
				{
					<img src="~/images/userdefault.png" height="30" style="background-color:lightgrey;" />
				}
				else
				{
					string imageBase64 = Convert.ToBase64String(Model.ProfilePicture);
					string imageSrc = string.Format("data:image/gif;base64,{0}", imageBase64);
					<img src="@imageSrc" height="30" />
				}
				Hello, @Model.DisplayName <span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li class="dropdown-header text-bold">@User.Identity.Name</li>
				<li><a asp-area="" asp-controller="AppUsers" asp-action="SelfEdit">Settings</a></li>
				<li class="divider"></li>
				<li><a asp-area="" asp-controller="Clients" asp-action="Statistics">Statistics</a></li>
			</ul>
		</li>

		@if (User.HasClaim(ClaimTypes.Role, "Admin"))
		{
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
					<i class="glyphicon glyphicon-cog"></i>
					<span class="caret"></span>
				</a>
				<ul class="dropdown-menu" role="menu">
					<li class="dropdown-header text-bold">Admin Tools</li>
					<li><a asp-area="" asp-controller="AppSettings" asp-action="Index">Application Settings</a></li>
					<li class="divider"></li>
					<li><a asp-area="" asp-controller="Currencies" asp-action="Index">Currencies</a></li>
					<li><a asp-area="" asp-controller="Risks" asp-action="Index">Risks (for Projects)</a></li>
					<li><a asp-area="" asp-controller="Roles" asp-action="Index">Roles</a></li>
					<li><a asp-area="" asp-controller="SkillLevels" asp-action="Index">Skill Levels</a></li>
					<li><a asp-area="" asp-controller="Teams" asp-action="Index">Teams</a></li>
					<li><a asp-area="" asp-controller="Units" asp-action="Index">Units</a></li>
					<li class="divider"></li>
					<li><a asp-area="" asp-controller="AppUsers" asp-action="Index">Users</a></li>
				</ul>
			</li>
		}
	</ul>
}
else
{
	<ul class="nav navbar-nav">
		<li><a asp-area="" asp-controller="Home" asp-action="Contact">Support</a></li>
	</ul>
	<ul class="nav navbar-nav navbar-right">
		<li class="navbar-text">I don't know you. Get out!</li>
	</ul>
}
